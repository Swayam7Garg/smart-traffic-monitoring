@startuml Smart Traffic Management System Architecture

title Smart Traffic Management System - System Architecture

skinparam backgroundColor #FEFEFE
skinparam roundcorner 10

' ==================== INPUT LAYER ====================
package "INPUT LAYER" #FFE6E6 {
    rectangle "ðŸ“¹ 4 IP Cameras\n(North, South, East, West)" as Cameras #FF6B6B
    rectangle "ðŸŽ¬ Video Upload" as VideoFile #FFB6C1
}

' ==================== PROCESSING LAYER ====================
package "VIDEO PROCESSING" #FFE6CC {
    rectangle "ðŸŽ¬ OpenCV\nFrame Extraction" as FrameExtract #FFA500
}

' ==================== AI LAYER ====================
package "AI/ML LAYER" #FFCCCC {
    rectangle "ðŸ§  YOLOv8\nVehicle Detection\nConfidence: 0.15" as YOLO #EE4C2C
}

' ==================== INTELLIGENCE LAYER ====================
package "INTELLIGENCE LAYER" #E6F2FF {
    rectangle "ðŸ“Š Traffic Analyzer\nVehicle Counting\nDensity Calculation" as Analyzer #4A90E2
    rectangle "ðŸš¨ Emergency Detector\nColor Detection (HSV)" as Emergency #FFD700
    rectangle "ðŸš¦ Signal Controller\nAdaptive Algorithm" as Signal #50C878
}

' ==================== BACKEND ====================
package "BACKEND (FastAPI)" #E6FFE6 {
    rectangle "ðŸ”Œ API Server\nPort: 8000" as API #009688
    rectangle "ðŸ”„ WebSocket\nReal-time Updates" as WebSocket #26C6DA
}

' ==================== DATABASE ====================
package "DATABASE" #E6FFE6 {
    database "ðŸ’¾ MongoDB\nPort: 27017" as MongoDB #47A248
}

' ==================== FRONTEND ====================
package "FRONTEND (React)" #F0E6FF {
    rectangle "âš›ï¸ React App\nPort: 5173" as ReactApp #61DAFB
    rectangle "ðŸ“± Dashboard\nAnalytics\nMonitoring" as Pages #9C27B0
}

' ==================== CONNECTIONS ====================
Cameras -down-> FrameExtract
VideoFile -down-> FrameExtract
FrameExtract -down-> YOLO

YOLO -down-> Analyzer
YOLO -down-> Emergency

Analyzer -down-> Signal
Emergency -down-> Signal

Signal -down-> API
Analyzer -down-> API
Emergency -down-> API

API -down-> WebSocket
API -down-> MongoDB

ReactApp -up-> API
ReactApp -up-> WebSocket
ReactApp -down-> Pages

' ==================== NOTES ====================
note right of YOLO
  **YOLOv8 Model**
  â€¢ 7 Vehicle Classes
  â€¢ 30 FPS Processing
  â€¢ 85%+ Accuracy
end note

note right of Signal
  **Adaptive Algorithm**
  Green Time = 
  (Vehicle Count / Total) Ã— Max
  
  Min: 15s | Max: 120s
end note

@enduml
